{
  "numFailedTestSuites": 1,
  "numFailedTests": 9,
  "numPassedTestSuites": 4,
  "numPassedTests": 87,
  "numPendingTestSuites": 0,
  "numPendingTests": 0,
  "numRuntimeErrorTestSuites": 0,
  "numTodoTests": 0,
  "numTotalTestSuites": 5,
  "numTotalTests": 96,
  "openHandles": [],
  "snapshot": {
    "added": 0,
    "didUpdate": false,
    "failure": false,
    "filesAdded": 0,
    "filesRemoved": 0,
    "filesRemovedList": [],
    "filesUnmatched": 0,
    "filesUpdated": 0,
    "matched": 0,
    "total": 0,
    "unchecked": 0,
    "uncheckedKeysByFile": [],
    "unmatched": 0,
    "updated": 0
  },
  "startTime": 1762308904781,
  "success": false,
  "testResults": [
    {
      "assertionResults": [
        {
          "ancestorTitles": ["Snowfall API (additional)"],
          "duration": 7,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "Snowfall API (additional) setColour, setDensity, setAmplitude, setFrequency call through",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 4,
          "retryReasons": [],
          "status": "passed",
          "title": "setColour, setDensity, setAmplitude, setFrequency call through"
        },
        {
          "ancestorTitles": ["Snowfall API (additional)"],
          "duration": 1,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "Snowfall API (additional) pause and toggle",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 2,
          "retryReasons": [],
          "status": "passed",
          "title": "pause and toggle"
        },
        {
          "ancestorTitles": ["Snowfall API (additional)"],
          "duration": 2,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "Snowfall API (additional) wind & gusts & gravity setters",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 7,
          "retryReasons": [],
          "status": "passed",
          "title": "wind & gusts & gravity setters"
        },
        {
          "ancestorTitles": ["Snowfall API (additional)"],
          "duration": 2,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "Snowfall API (additional) wind in/out timing & change chance",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 11,
          "retryReasons": [],
          "status": "passed",
          "title": "wind in/out timing & change chance"
        },
        {
          "ancestorTitles": ["Snowfall API (additional)"],
          "duration": 1,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "Snowfall API (additional) mass and size min/max",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 4,
          "retryReasons": [],
          "status": "passed",
          "title": "mass and size min/max"
        },
        {
          "ancestorTitles": ["Snowfall API (additional)"],
          "duration": 1,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "Snowfall API (additional) start() swallows errors and logs to console.error",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 2,
          "retryReasons": [],
          "status": "passed",
          "title": "start() swallows errors and logs to console.error"
        },
        {
          "ancestorTitles": ["Snowfall API (additional)"],
          "duration": 2,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "Snowfall API (additional) schedule() calls start when withinSchedule true and not otherwise",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 3,
          "retryReasons": [],
          "status": "passed",
          "title": "schedule() calls start when withinSchedule true and not otherwise"
        },
        {
          "ancestorTitles": ["Snowfall API (additional)"],
          "duration": 0,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "Snowfall API (additional) restart() calls simulation.restart if started",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 1,
          "retryReasons": [],
          "status": "passed",
          "title": "restart() calls simulation.restart if started"
        },
        {
          "ancestorTitles": ["Snowfall API (additional)"],
          "duration": 1,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "Snowfall API (additional) restart() does nothing if not started",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 3,
          "retryReasons": [],
          "status": "passed",
          "title": "restart() does nothing if not started"
        }
      ],
      "endTime": 1762308907509,
      "message": "",
      "name": "/home/erik/projects-new/snowfall/src/test/snowfall.test.ts",
      "startTime": 1762308906086,
      "status": "passed",
      "summary": ""
    },
    {
      "assertionResults": [
        {
          "ancestorTitles": ["random"],
          "duration": 6,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "random returns a number between 0 and 1 when no arguments are provided",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 3,
          "retryReasons": [],
          "status": "passed",
          "title": "returns a number between 0 and 1 when no arguments are provided"
        },
        {
          "ancestorTitles": ["random"],
          "duration": 1,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "random returns a number between 0 and to when only to is provided",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 3,
          "retryReasons": [],
          "status": "passed",
          "title": "returns a number between 0 and to when only to is provided"
        },
        {
          "ancestorTitles": ["random"],
          "duration": 1,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "random returns a number between from and to when both are provided",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 3,
          "retryReasons": [],
          "status": "passed",
          "title": "returns a number between from and to when both are provided"
        },
        {
          "ancestorTitles": ["random"],
          "duration": 0,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "random handles negative ranges correctly",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 3,
          "retryReasons": [],
          "status": "passed",
          "title": "handles negative ranges correctly"
        },
        {
          "ancestorTitles": ["random"],
          "duration": 0,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "random returns from when from === to",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 1,
          "retryReasons": [],
          "status": "passed",
          "title": "returns from when from === to"
        },
        {
          "ancestorTitles": ["random"],
          "duration": 0,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "random handles floating-point inputs",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 3,
          "retryReasons": [],
          "status": "passed",
          "title": "handles floating-point inputs"
        },
        {
          "ancestorTitles": ["random"],
          "duration": 2,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "random returns values within range over multiple calls (non-deterministic check)",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 20,
          "retryReasons": [],
          "status": "passed",
          "title": "returns values within range over multiple calls (non-deterministic check)"
        },
        {
          "ancestorTitles": ["random"],
          "duration": 0,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "random handles invalid order (from > to) by producing values in that range",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 3,
          "retryReasons": [],
          "status": "passed",
          "title": "handles invalid order (from > to) by producing values in that range"
        },
        {
          "ancestorTitles": ["random"],
          "duration": 1,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "random returns 0 for explicit undefined arguments (edge case)",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 1,
          "retryReasons": [],
          "status": "passed",
          "title": "returns 0 for explicit undefined arguments (edge case)"
        },
        {
          "ancestorTitles": ["random"],
          "duration": 1,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "random returns 0 for other invalid combinations",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 1,
          "retryReasons": [],
          "status": "passed",
          "title": "returns 0 for other invalid combinations"
        }
      ],
      "endTime": 1762308907611,
      "message": "",
      "name": "/home/erik/projects-new/snowfall/src/test/math.test.ts",
      "startTime": 1762308906061,
      "status": "passed",
      "summary": ""
    },
    {
      "assertionResults": [
        {
          "ancestorTitles": ["withinSchedule"],
          "duration": 6,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "withinSchedule returns true when today is within same-year schedule",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 1,
          "retryReasons": [],
          "status": "passed",
          "title": "returns true when today is within same-year schedule"
        },
        {
          "ancestorTitles": ["withinSchedule"],
          "duration": 0,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "withinSchedule returns true on exact start date",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 1,
          "retryReasons": [],
          "status": "passed",
          "title": "returns true on exact start date"
        },
        {
          "ancestorTitles": ["withinSchedule"],
          "duration": 1,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "withinSchedule returns true on exact end date (even at 23:59:59)",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 1,
          "retryReasons": [],
          "status": "passed",
          "title": "returns true on exact end date (even at 23:59:59)"
        },
        {
          "ancestorTitles": ["withinSchedule"],
          "duration": 0,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "withinSchedule returns false when today is before start",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 1,
          "retryReasons": [],
          "status": "passed",
          "title": "returns false when today is before start"
        },
        {
          "ancestorTitles": ["withinSchedule"],
          "duration": 0,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "withinSchedule returns false when today is after end",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 1,
          "retryReasons": [],
          "status": "passed",
          "title": "returns false when today is after end"
        },
        {
          "ancestorTitles": ["withinSchedule"],
          "duration": 0,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "withinSchedule handles schedules that span new year (Dec to Jan) when today is in December",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 1,
          "retryReasons": [],
          "status": "passed",
          "title": "handles schedules that span new year (Dec to Jan) when today is in December"
        },
        {
          "ancestorTitles": ["withinSchedule"],
          "duration": 0,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "withinSchedule handles new year span correctly when today is in January",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 1,
          "retryReasons": [],
          "status": "passed",
          "title": "handles new year span correctly when today is in January"
        },
        {
          "ancestorTitles": ["withinSchedule"],
          "duration": 0,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "withinSchedule returns false for new year span when today is too early (before Dec 25)",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 1,
          "retryReasons": [],
          "status": "passed",
          "title": "returns false for new year span when today is too early (before Dec 25)"
        },
        {
          "ancestorTitles": ["withinSchedule"],
          "duration": 0,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "withinSchedule returns false for new year span when today is too late (after Jan 5)",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 1,
          "retryReasons": [],
          "status": "passed",
          "title": "returns false for new year span when today is too late (after Jan 5)"
        },
        {
          "ancestorTitles": ["withinSchedule"],
          "duration": 0,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "withinSchedule handles February 29 correctly in leap year",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 1,
          "retryReasons": [],
          "status": "passed",
          "title": "handles February 29 correctly in leap year"
        },
        {
          "ancestorTitles": ["withinSchedule"],
          "duration": 1,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "withinSchedule handles February 29 in non-leap year (rolls over to March 1)",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 2,
          "retryReasons": [],
          "status": "passed",
          "title": "handles February 29 in non-leap year (rolls over to March 1)"
        },
        {
          "ancestorTitles": ["withinSchedule"],
          "duration": 11,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "withinSchedule throws on invalid month",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 1,
          "retryReasons": [],
          "status": "passed",
          "title": "throws on invalid month"
        },
        {
          "ancestorTitles": ["withinSchedule"],
          "duration": 0,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "withinSchedule throws on invalid day (e.g. June 31)",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 1,
          "retryReasons": [],
          "status": "passed",
          "title": "throws on invalid day (e.g. June 31)"
        },
        {
          "ancestorTitles": ["withinSchedule"],
          "duration": 1,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "withinSchedule throws on day 0",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 1,
          "retryReasons": [],
          "status": "passed",
          "title": "throws on day 0"
        },
        {
          "ancestorTitles": ["withinSchedule"],
          "duration": 1,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "withinSchedule throws on day 32",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 1,
          "retryReasons": [],
          "status": "passed",
          "title": "throws on day 32"
        },
        {
          "ancestorTitles": ["withinSchedule"],
          "duration": 0,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "withinSchedule returns true for same-day schedule on that day",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 1,
          "retryReasons": [],
          "status": "passed",
          "title": "returns true for same-day schedule on that day"
        },
        {
          "ancestorTitles": ["withinSchedule"],
          "duration": 1,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "withinSchedule returns false for same-day schedule before the day",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 1,
          "retryReasons": [],
          "status": "passed",
          "title": "returns false for same-day schedule before the day"
        },
        {
          "ancestorTitles": ["withinSchedule"],
          "duration": 0,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "withinSchedule returns false for same-day schedule after the day",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 1,
          "retryReasons": [],
          "status": "passed",
          "title": "returns false for same-day schedule after the day"
        },
        {
          "ancestorTitles": ["withinSchedule"],
          "duration": 0,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "withinSchedule returns true for multi-month span without wrap-around (inside range)",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 1,
          "retryReasons": [],
          "status": "passed",
          "title": "returns true for multi-month span without wrap-around (inside range)"
        },
        {
          "ancestorTitles": ["withinSchedule"],
          "duration": 0,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "withinSchedule returns false for multi-month span without wrap-around (before range)",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 1,
          "retryReasons": [],
          "status": "passed",
          "title": "returns false for multi-month span without wrap-around (before range)"
        },
        {
          "ancestorTitles": ["withinSchedule"],
          "duration": 0,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "withinSchedule returns false for multi-month span without wrap-around (after range)",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 1,
          "retryReasons": [],
          "status": "passed",
          "title": "returns false for multi-month span without wrap-around (after range)"
        },
        {
          "ancestorTitles": ["withinSchedule"],
          "duration": 0,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "withinSchedule returns true for larger wrap-around span (inside fall/winter)",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 1,
          "retryReasons": [],
          "status": "passed",
          "title": "returns true for larger wrap-around span (inside fall/winter)"
        },
        {
          "ancestorTitles": ["withinSchedule"],
          "duration": 0,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "withinSchedule returns true for larger wrap-around span (inside winter next year)",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 1,
          "retryReasons": [],
          "status": "passed",
          "title": "returns true for larger wrap-around span (inside winter next year)"
        },
        {
          "ancestorTitles": ["withinSchedule"],
          "duration": 0,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "withinSchedule returns false for larger wrap-around span (before range)",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 1,
          "retryReasons": [],
          "status": "passed",
          "title": "returns false for larger wrap-around span (before range)"
        },
        {
          "ancestorTitles": ["withinSchedule"],
          "duration": 0,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "withinSchedule returns false for larger wrap-around span (after range)",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 1,
          "retryReasons": [],
          "status": "passed",
          "title": "returns false for larger wrap-around span (after range)"
        },
        {
          "ancestorTitles": ["withinSchedule"],
          "duration": 0,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "withinSchedule handles inverted days in same month as wrap-around (true in \"after\" part)",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 1,
          "retryReasons": [],
          "status": "passed",
          "title": "handles inverted days in same month as wrap-around (true in \"after\" part)"
        },
        {
          "ancestorTitles": ["withinSchedule"],
          "duration": 0,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "withinSchedule handles inverted days in same month as wrap-around (true in \"before\" part next year)",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 1,
          "retryReasons": [],
          "status": "passed",
          "title": "handles inverted days in same month as wrap-around (true in \"before\" part next year)"
        },
        {
          "ancestorTitles": ["withinSchedule"],
          "duration": 0,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "withinSchedule handles inverted days in same month as wrap-around (false in gap)",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 1,
          "retryReasons": [],
          "status": "passed",
          "title": "handles inverted days in same month as wrap-around (false in gap)"
        },
        {
          "ancestorTitles": ["withinSchedule"],
          "duration": 1,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "withinSchedule throws on invalid day (February 30)",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 1,
          "retryReasons": [],
          "status": "passed",
          "title": "throws on invalid day (February 30)"
        },
        {
          "ancestorTitles": ["withinSchedule"],
          "duration": 1,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "withinSchedule throws on invalid day (April 31)",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 1,
          "retryReasons": [],
          "status": "passed",
          "title": "throws on invalid day (April 31)"
        },
        {
          "ancestorTitles": ["withinSchedule"],
          "duration": 0,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "withinSchedule throws on invalid month (month 0)",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 1,
          "retryReasons": [],
          "status": "passed",
          "title": "throws on invalid month (month 0)"
        },
        {
          "ancestorTitles": ["withinSchedule"],
          "duration": 1,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "withinSchedule returns true for leap year start to non-leap rollover (on March 1 in non-leap year)",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 1,
          "retryReasons": [],
          "status": "passed",
          "title": "returns true for leap year start to non-leap rollover (on March 1 in non-leap year)"
        }
      ],
      "endTime": 1762308907613,
      "message": "",
      "name": "/home/erik/projects-new/snowfall/src/test/utils.test.ts",
      "startTime": 1762308906065,
      "status": "passed",
      "summary": ""
    },
    {
      "assertionResults": [
        {
          "ancestorTitles": ["Config diffing"],
          "duration": 4,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "Config diffing should diff density change",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 1,
          "retryReasons": [],
          "status": "passed",
          "title": "should diff density change"
        },
        {
          "ancestorTitles": ["Config diffing"],
          "duration": 1,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "Config diffing should omit density if default",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 1,
          "retryReasons": [],
          "status": "passed",
          "title": "should omit density if default"
        },
        {
          "ancestorTitles": ["Config diffing"],
          "duration": 0,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "Config diffing should diff mass bounds partial",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 1,
          "retryReasons": [],
          "status": "passed",
          "title": "should diff mass bounds partial"
        },
        {
          "ancestorTitles": ["Config diffing"],
          "duration": 0,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "Config diffing should diff image layer with nested base change",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 1,
          "retryReasons": [],
          "status": "passed",
          "title": "should diff image layer with nested base change"
        },
        {
          "ancestorTitles": ["Config diffing"],
          "duration": 0,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "Config diffing should infer image without mode if rotate provided",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 1,
          "retryReasons": [],
          "status": "passed",
          "title": "should infer image without mode if rotate provided"
        },
        {
          "ancestorTitles": ["Config diffing"],
          "duration": 1,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "Config diffing should diff full wind gusts in.delay",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 1,
          "retryReasons": [],
          "status": "passed",
          "title": "should diff full wind gusts in.delay"
        },
        {
          "ancestorTitles": ["Config diffing"],
          "duration": 0,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "Config diffing should merge density with default fill",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 1,
          "retryReasons": [],
          "status": "passed",
          "title": "should merge density with default fill"
        },
        {
          "ancestorTitles": ["Config diffing"],
          "duration": 1,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "Config diffing should merge mass partials",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 1,
          "retryReasons": [],
          "status": "passed",
          "title": "should merge mass partials"
        },
        {
          "ancestorTitles": ["Config diffing"],
          "duration": 0,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "Config diffing should merge image with mode added and set to image if image provided",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 2,
          "retryReasons": [],
          "status": "passed",
          "title": "should merge image with mode added and set to image if image provided"
        },
        {
          "ancestorTitles": ["Config diffing"],
          "duration": 0,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "Config diffing should merge deep gusts out.duration full",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 1,
          "retryReasons": [],
          "status": "passed",
          "title": "should merge deep gusts out.duration full"
        },
        {
          "ancestorTitles": ["Config diffing"],
          "duration": 1,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "Config diffing should diff an image layer with custom image and rotate",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 1,
          "retryReasons": [],
          "status": "passed",
          "title": "should diff an image layer with custom image and rotate"
        },
        {
          "ancestorTitles": ["Config diffing"],
          "duration": 0,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "Config diffing should diff an image layer with default rotate (false)",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 1,
          "retryReasons": [],
          "status": "passed",
          "title": "should diff an image layer with default rotate (false)"
        },
        {
          "ancestorTitles": ["Config diffing"],
          "duration": 0,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "Config diffing should omit image layer properties set to defaults",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 1,
          "retryReasons": [],
          "status": "passed",
          "title": "should omit image layer properties set to defaults"
        },
        {
          "ancestorTitles": ["Config diffing"],
          "duration": 0,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "Config diffing should omit image if set to default in image layer",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 1,
          "retryReasons": [],
          "status": "passed",
          "title": "should omit image if set to default in image layer"
        },
        {
          "ancestorTitles": ["Config diffing"],
          "duration": 1,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "Config diffing should diff nested size bounds changes",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 1,
          "retryReasons": [],
          "status": "passed",
          "title": "should diff nested size bounds changes"
        },
        {
          "ancestorTitles": ["Config diffing"],
          "duration": 0,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "Config diffing should diff partial size bounds (only min changed)",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 1,
          "retryReasons": [],
          "status": "passed",
          "title": "should diff partial size bounds (only min changed)"
        },
        {
          "ancestorTitles": ["Config diffing"],
          "duration": 0,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "Config diffing should omit size bounds if set to defaults",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 1,
          "retryReasons": [],
          "status": "passed",
          "title": "should omit size bounds if set to defaults"
        },
        {
          "ancestorTitles": ["Config diffing"],
          "duration": 0,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "Config diffing should diff sway properties",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 1,
          "retryReasons": [],
          "status": "passed",
          "title": "should diff sway properties"
        },
        {
          "ancestorTitles": ["Config diffing"],
          "duration": 0,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "Config diffing should diff partial sway (only frequency changed)",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 1,
          "retryReasons": [],
          "status": "passed",
          "title": "should diff partial sway (only frequency changed)"
        },
        {
          "ancestorTitles": ["Config diffing"],
          "duration": 1,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "Config diffing should diff gravity changes",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 1,
          "retryReasons": [],
          "status": "passed",
          "title": "should diff gravity changes"
        },
        {
          "ancestorTitles": ["Config diffing"],
          "duration": 0,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "Config diffing should diff wind angle without strength",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 1,
          "retryReasons": [],
          "status": "passed",
          "title": "should diff wind angle without strength"
        },
        {
          "ancestorTitles": ["Config diffing"],
          "duration": 0,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "Config diffing should diff deep nested gusts properties",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 1,
          "retryReasons": [],
          "status": "passed",
          "title": "should diff deep nested gusts properties"
        },
        {
          "ancestorTitles": ["Config diffing"],
          "duration": 0,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "Config diffing should diff wind gusts active false",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 1,
          "retryReasons": [],
          "status": "passed",
          "title": "should diff wind gusts active false"
        },
        {
          "ancestorTitles": ["Config diffing"],
          "duration": 1,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "Config diffing should diff wind gusts changeChance",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 1,
          "retryReasons": [],
          "status": "passed",
          "title": "should diff wind gusts changeChance"
        },
        {
          "ancestorTitles": ["Config diffing"],
          "duration": 0,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "Config diffing should diff wind gusts out duration partial",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 1,
          "retryReasons": [],
          "status": "passed",
          "title": "should diff wind gusts out duration partial"
        },
        {
          "ancestorTitles": ["Config diffing"],
          "duration": 1,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "Config diffing should handle mixed simple and image layers in diff",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 1,
          "retryReasons": [],
          "status": "passed",
          "title": "should handle mixed simple and image layers in diff"
        },
        {
          "ancestorTitles": ["Config diffing"],
          "duration": 0,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "Config diffing should omit entire layer if all properties are defaults",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 1,
          "retryReasons": [],
          "status": "passed",
          "title": "should omit entire layer if all properties are defaults"
        },
        {
          "ancestorTitles": ["config merging"],
          "duration": 0,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "config merging should merge a partial simple layer with defaults",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 1,
          "retryReasons": [],
          "status": "passed",
          "title": "should merge a partial simple layer with defaults"
        },
        {
          "ancestorTitles": ["config merging"],
          "duration": 1,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "config merging should merge an image layer with defaults",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 1,
          "retryReasons": [],
          "status": "passed",
          "title": "should merge an image layer with defaults"
        },
        {
          "ancestorTitles": ["config merging"],
          "duration": 0,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "config merging should assume simple mode if not specified and colour is provided",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 1,
          "retryReasons": [],
          "status": "passed",
          "title": "should assume simple mode if not specified and colour is provided"
        },
        {
          "ancestorTitles": ["config merging"],
          "duration": 0,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "config merging should merge nested properties with partials",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 5,
          "retryReasons": [],
          "status": "passed",
          "title": "should merge nested properties with partials"
        },
        {
          "ancestorTitles": ["config merging"],
          "duration": 1,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "config merging should merge wind gusts partials with defaults",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 4,
          "retryReasons": [],
          "status": "passed",
          "title": "should merge wind gusts partials with defaults"
        },
        {
          "ancestorTitles": ["config merging"],
          "duration": 0,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "config merging should merge multiple layers with mixed types",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 4,
          "retryReasons": [],
          "status": "passed",
          "title": "should merge multiple layers with mixed types"
        },
        {
          "ancestorTitles": ["config merging"],
          "duration": 1,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "config merging should handle empty layer objects by filling with defaults",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 1,
          "retryReasons": [],
          "status": "passed",
          "title": "should handle empty layer objects by filling with defaults"
        }
      ],
      "endTime": 1762308907710,
      "message": "",
      "name": "/home/erik/projects-new/snowfall/src/test/config.test.ts",
      "startTime": 1762308906061,
      "status": "passed",
      "summary": ""
    },
    {
      "assertionResults": [
        {
          "ancestorTitles": ["Simulation"],
          "duration": 6,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "Simulation create returns a simulation object with expected methods",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 30,
          "retryReasons": [],
          "status": "passed",
          "title": "create returns a simulation object with expected methods"
        },
        {
          "ancestorTitles": ["Simulation"],
          "duration": 4,
          "failureDetails": [
            {
              "matcherResult": {
                "message": "\u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n  \u001b[2m{\"mode\": \"simple\", \"wind\": {\"gusts\": {\"in\": {\"additionalStrength\": {\"max\": 1.5, \"min\": 0.5}, \"delay\": {\"max\": 1000, \"min\": 500}, \"duration\": {\"max\": 2000, \"min\": 1000}}, \"out\": {\"delay\": {\"max\": 1200, \"min\": 600}, \"duration\": {\"max\": 2500, \"min\": 1500}}}, \"strength\": 1}}\u001b[22m,\n  \u001b[2m1920\u001b[22m,\n  \u001b[2m1080\u001b[22m,\n  \u001b[2m1.5\u001b[22m,\n\u001b[32m- 1000\u001b[39m,\n\u001b[31m+ 500\u001b[39m,\n  \u001b[2m500\u001b[22m,\n  \u001b[2m1500\u001b[22m,\n  \u001b[2m600\u001b[22m,\n  \u001b[2m0\u001b[22m,\n\nNumber of calls: \u001b[31m1\u001b[39m",
                "pass": false
              }
            }
          ],
          "failureMessages": [
            "Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n  \u001b[2m{\"mode\": \"simple\", \"wind\": {\"gusts\": {\"in\": {\"additionalStrength\": {\"max\": 1.5, \"min\": 0.5}, \"delay\": {\"max\": 1000, \"min\": 500}, \"duration\": {\"max\": 2000, \"min\": 1000}}, \"out\": {\"delay\": {\"max\": 1200, \"min\": 600}, \"duration\": {\"max\": 2500, \"min\": 1500}}}, \"strength\": 1}}\u001b[22m,\n  \u001b[2m1920\u001b[22m,\n  \u001b[2m1080\u001b[22m,\n  \u001b[2m1.5\u001b[22m,\n\u001b[32m- 1000\u001b[39m,\n\u001b[31m+ 500\u001b[39m,\n  \u001b[2m500\u001b[22m,\n  \u001b[2m1500\u001b[22m,\n  \u001b[2m600\u001b[22m,\n  \u001b[2m0\u001b[22m,\n\nNumber of calls: \u001b[31m1\u001b[39m\n    at Object.<anonymous> (/home/erik/projects-new/snowfall/src/test/simulation.test.ts:199:29)\n    at Promise.then.completed (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at run (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/testWorker.js:106:12)"
          ],
          "fullName": "Simulation start sets up config, layers, and simulation correctly",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 2,
          "retryReasons": [],
          "status": "failed",
          "title": "start sets up config, layers, and simulation correctly"
        },
        {
          "ancestorTitles": ["Simulation"],
          "duration": 1,
          "failureDetails": [{}],
          "failureMessages": [
            "Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n\u001b[1mMatcher error\u001b[22m: \u001b[31mreceived\u001b[39m value must be a mock or spy function\n\nReceived has value: \u001b[31mundefined\u001b[39m\n    at Object.<anonymous> (/home/erik/projects-new/snowfall/src/test/simulation.test.ts:243:40)\n    at Promise.then.completed (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at run (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/testWorker.js:106:12)"
          ],
          "fullName": "Simulation update calls TWEEN.update and layer updates",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 1,
          "retryReasons": [],
          "status": "failed",
          "title": "update calls TWEEN.update and layer updates"
        },
        {
          "ancestorTitles": ["Simulation"],
          "duration": 1,
          "failureDetails": [{}],
          "failureMessages": [
            "Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n\u001b[1mMatcher error\u001b[22m: \u001b[31mreceived\u001b[39m value must be a mock or spy function\n\nReceived has value: \u001b[31mundefined\u001b[39m\n    at Object.<anonymous> (/home/erik/projects-new/snowfall/src/test/simulation.test.ts:256:40)\n    at Promise.then.completed (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at run (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/testWorker.js:106:12)"
          ],
          "fullName": "Simulation render clears and calls layer renders",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 1,
          "retryReasons": [],
          "status": "failed",
          "title": "render clears and calls layer renders"
        },
        {
          "ancestorTitles": ["Simulation"],
          "duration": 1,
          "failureDetails": [
            {
              "matcherResult": {
                "expected": 1280,
                "message": "\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m1280\u001b[39m\nReceived: \u001b[31mundefined\u001b[39m",
                "name": "toBe",
                "pass": false
              }
            }
          ],
          "failureMessages": [
            "Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m1280\u001b[39m\nReceived: \u001b[31mundefined\u001b[39m\n    at Object.<anonymous> (/home/erik/projects-new/snowfall/src/test/simulation.test.ts:268:39)\n    at Promise.then.completed (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at run (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/testWorker.js:106:12)"
          ],
          "fullName": "Simulation onResize updates sizes and restarts layers",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 0,
          "retryReasons": [],
          "status": "failed",
          "title": "onResize updates sizes and restarts layers"
        },
        {
          "ancestorTitles": ["Simulation"],
          "duration": 17,
          "failureDetails": [{}],
          "failureMessages": [
            "Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalled\u001b[2m()\u001b[22m\n\n\u001b[1mMatcher error\u001b[22m: \u001b[31mreceived\u001b[39m value must be a mock or spy function\n\nReceived has value: \u001b[31mundefined\u001b[39m\n    at Object.<anonymous> (/home/erik/projects-new/snowfall/src/test/simulation.test.ts:283:41)\n    at Promise.then.completed (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at run (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/testWorker.js:106:12)"
          ],
          "fullName": "Simulation restart without config restarts layers and updates size",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 0,
          "retryReasons": [],
          "status": "failed",
          "title": "restart without config restarts layers and updates size"
        },
        {
          "ancestorTitles": ["Simulation"],
          "duration": 2,
          "failureDetails": [{}],
          "failureMessages": [
            "Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalled\u001b[2m()\u001b[22m\n\n\u001b[1mMatcher error\u001b[22m: \u001b[31mreceived\u001b[39m value must be a mock or spy function\n\nReceived has value: \u001b[31mundefined\u001b[39m\n    at Object.<anonymous> (/home/erik/projects-new/snowfall/src/test/simulation.test.ts:300:42)\n    at Promise.then.completed (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at run (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/testWorker.js:106:12)"
          ],
          "fullName": "Simulation restart with userConfig merges new config, recreates layers, and updates",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 3,
          "retryReasons": [],
          "status": "failed",
          "title": "restart with userConfig merges new config, recreates layers, and updates"
        },
        {
          "ancestorTitles": ["Simulation"],
          "duration": 1,
          "failureDetails": [{}],
          "failureMessages": [
            "Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n\u001b[1mMatcher error\u001b[22m: \u001b[31mreceived\u001b[39m value must be a mock or spy function\n\nReceived has value: \u001b[31mundefined\u001b[39m\n    at Object.<anonymous> (/home/erik/projects-new/snowfall/src/test/simulation.test.ts:312:43)\n    at Promise.then.completed (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at run (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/testWorker.js:106:12)"
          ],
          "fullName": "Simulation setColour calls on simple layer, errors on image layer",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 0,
          "retryReasons": [],
          "status": "failed",
          "title": "setColour calls on simple layer, errors on image layer"
        },
        {
          "ancestorTitles": ["Simulation"],
          "duration": 1,
          "failureDetails": [{}],
          "failureMessages": [
            "Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n\u001b[1mMatcher error\u001b[22m: \u001b[31mreceived\u001b[39m value must be a mock or spy function\n\nReceived has value: \u001b[31mundefined\u001b[39m\n    at Object.<anonymous> (/home/erik/projects-new/snowfall/src/test/simulation.test.ts:326:44)\n    at Promise.then.completed (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at run (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/testWorker.js:106:12)"
          ],
          "fullName": "Simulation setter methods call through to layers",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 0,
          "retryReasons": [],
          "status": "failed",
          "title": "setter methods call through to layers"
        },
        {
          "ancestorTitles": ["Simulation"],
          "duration": 0,
          "failureDetails": [],
          "failureMessages": [],
          "fullName": "Simulation setters on non-existent layer do nothing",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 1,
          "retryReasons": [],
          "status": "passed",
          "title": "setters on non-existent layer do nothing"
        },
        {
          "ancestorTitles": ["Simulation"],
          "duration": 1,
          "failureDetails": [{}],
          "failureMessages": [
            "TypeError: Cannot read properties of null (reading 'offsetWidth')\n    at /home/erik/projects-new/snowfall/src/simulation.ts:54:27\n    at Array.forEach (<anonymous>)\n    at makeLayers (/home/erik/projects-new/snowfall/src/simulation.ts:23:19)\n    at commonStart (/home/erik/projects-new/snowfall/src/simulation.ts:18:5)\n    at Object.start (/home/erik/projects-new/snowfall/src/simulation.ts:85:5)\n    at Object.<anonymous> (/home/erik/projects-new/snowfall/src/test/simulation.test.ts:389:13)\n    at Promise.then.completed (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at run (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/home/erik/projects-new/snowfall/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/testWorker.js:106:12)"
          ],
          "fullName": "Simulation start without attachTo logs error and does not start simulation",
          "invocations": 1,
          "location": null,
          "numPassingAsserts": 0,
          "retryReasons": [],
          "status": "failed",
          "title": "start without attachTo logs error and does not start simulation"
        }
      ],
      "endTime": 1762308907720,
      "message": "\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mSimulation  start sets up config, layers, and simulation correctly\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    \u001b[32m- Expected\u001b[39m\n    \u001b[31m+ Received\u001b[39m\n\n      \u001b[2m{\"mode\": \"simple\", \"wind\": {\"gusts\": {\"in\": {\"additionalStrength\": {\"max\": 1.5, \"min\": 0.5}, \"delay\": {\"max\": 1000, \"min\": 500}, \"duration\": {\"max\": 2000, \"min\": 1000}}, \"out\": {\"delay\": {\"max\": 1200, \"min\": 600}, \"duration\": {\"max\": 2500, \"min\": 1500}}}, \"strength\": 1}}\u001b[22m,\n      \u001b[2m1920\u001b[22m,\n      \u001b[2m1080\u001b[22m,\n      \u001b[2m1.5\u001b[22m,\n    \u001b[32m- 1000\u001b[39m,\n    \u001b[31m+ 500\u001b[39m,\n      \u001b[2m500\u001b[22m,\n      \u001b[2m1500\u001b[22m,\n      \u001b[2m600\u001b[22m,\n      \u001b[2m0\u001b[22m,\n\n    Number of calls: \u001b[31m1\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 197 |\u001b[39m         expect(merge)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(userConfig)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 198 |\u001b[39m         expect(seededRandom)\u001b[33m.\u001b[39mtoHaveBeenCalledTimes(\u001b[35m12\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// 6 per layer x 2 layers\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 199 |\u001b[39m         expect(\u001b[33mSimpleLayer\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 200 |\u001b[39m             mockConfig\u001b[33m.\u001b[39mlayers[\u001b[35m0\u001b[39m]\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 201 |\u001b[39m             \u001b[35m1920\u001b[39m\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 202 |\u001b[39m             \u001b[35m1080\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/test/simulation.test.ts\u001b[39m\u001b[0m\u001b[2m:199:29)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mSimulation  update calls TWEEN.update and layer updates\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    \u001b[1mMatcher error\u001b[22m: \u001b[31mreceived\u001b[39m value must be a mock or spy function\n\n    Received has value: \u001b[31mundefined\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 241 |\u001b[39m         \u001b[36mconst\u001b[39m mockSimpleLayer \u001b[33m=\u001b[39m (\u001b[33mSimpleLayer\u001b[39m \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmock\u001b[33m.\u001b[39minstances[\u001b[35m0\u001b[39m]\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 242 |\u001b[39m         \u001b[36mconst\u001b[39m mockImageLayer \u001b[33m=\u001b[39m (\u001b[33mImageLayer\u001b[39m \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmock\u001b[33m.\u001b[39minstances[\u001b[35m0\u001b[39m]\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 243 |\u001b[39m         expect(mockSimpleLayer\u001b[33m.\u001b[39mupdate)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(dt)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                        \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 244 |\u001b[39m         expect(mockImageLayer\u001b[33m.\u001b[39mupdate)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(dt)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 245 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 246 |\u001b[39m     test(\u001b[32m'render clears and calls layer renders'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/test/simulation.test.ts\u001b[39m\u001b[0m\u001b[2m:243:40)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mSimulation  render clears and calls layer renders\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    \u001b[1mMatcher error\u001b[22m: \u001b[31mreceived\u001b[39m value must be a mock or spy function\n\n    Received has value: \u001b[31mundefined\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 254 |\u001b[39m         \u001b[36mconst\u001b[39m mockSimpleLayer \u001b[33m=\u001b[39m (\u001b[33mSimpleLayer\u001b[39m \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmock\u001b[33m.\u001b[39minstances[\u001b[35m0\u001b[39m]\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 255 |\u001b[39m         \u001b[36mconst\u001b[39m mockImageLayer \u001b[33m=\u001b[39m (\u001b[33mImageLayer\u001b[39m \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmock\u001b[33m.\u001b[39minstances[\u001b[35m0\u001b[39m]\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 256 |\u001b[39m         expect(mockSimpleLayer\u001b[33m.\u001b[39mrender)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(mockGfx)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                        \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 257 |\u001b[39m         expect(mockImageLayer\u001b[33m.\u001b[39mrender)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(mockGfx)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 258 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 259 |\u001b[39m     test(\u001b[32m'onResize updates sizes and restarts layers'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/test/simulation.test.ts\u001b[39m\u001b[0m\u001b[2m:256:40)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mSimulation  onResize updates sizes and restarts layers\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\n    Expected: \u001b[32m1280\u001b[39m\n    Received: \u001b[31mundefined\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 266 |\u001b[39m         \u001b[36mconst\u001b[39m mockSimpleLayer \u001b[33m=\u001b[39m (\u001b[33mSimpleLayer\u001b[39m \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmock\u001b[33m.\u001b[39minstances[\u001b[35m0\u001b[39m]\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 267 |\u001b[39m         \u001b[36mconst\u001b[39m mockImageLayer \u001b[33m=\u001b[39m (\u001b[33mImageLayer\u001b[39m \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmock\u001b[33m.\u001b[39minstances[\u001b[35m0\u001b[39m]\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 268 |\u001b[39m         expect(mockSimpleLayer\u001b[33m.\u001b[39mwidth)\u001b[33m.\u001b[39mtoBe(\u001b[35m1280\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 269 |\u001b[39m         expect(mockSimpleLayer\u001b[33m.\u001b[39mheight)\u001b[33m.\u001b[39mtoBe(\u001b[35m720\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 270 |\u001b[39m         expect(mockImageLayer\u001b[33m.\u001b[39mwidth)\u001b[33m.\u001b[39mtoBe(\u001b[35m1280\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 271 |\u001b[39m         expect(mockImageLayer\u001b[33m.\u001b[39mheight)\u001b[33m.\u001b[39mtoBe(\u001b[35m720\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/test/simulation.test.ts\u001b[39m\u001b[0m\u001b[2m:268:39)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mSimulation  restart without config restarts layers and updates size\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalled\u001b[2m()\u001b[22m\n\n    \u001b[1mMatcher error\u001b[22m: \u001b[31mreceived\u001b[39m value must be a mock or spy function\n\n    Received has value: \u001b[31mundefined\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 281 |\u001b[39m         \u001b[36mconst\u001b[39m mockImageLayer \u001b[33m=\u001b[39m (\u001b[33mImageLayer\u001b[39m \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmock\u001b[33m.\u001b[39minstances[\u001b[35m0\u001b[39m]\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 282 |\u001b[39m         sim\u001b[33m.\u001b[39mrestart({} \u001b[36mas\u001b[39m \u001b[33mUserConfig\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 283 |\u001b[39m         expect(mockSimpleLayer\u001b[33m.\u001b[39mrestart)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 284 |\u001b[39m         expect(mockImageLayer\u001b[33m.\u001b[39mrestart)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 285 |\u001b[39m         expect(mockSimulation\u001b[33m.\u001b[39msetSize)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[35m1920\u001b[39m\u001b[33m,\u001b[39m \u001b[35m1080\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 286 |\u001b[39m         expect(merge)\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoHaveBeenCalledTimes(\u001b[35m2\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// Only called in start\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/test/simulation.test.ts\u001b[39m\u001b[0m\u001b[2m:283:41)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mSimulation  restart with userConfig merges new config, recreates layers, and updates\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalled\u001b[2m()\u001b[22m\n\n    \u001b[1mMatcher error\u001b[22m: \u001b[31mreceived\u001b[39m value must be a mock or spy function\n\n    Received has value: \u001b[31mundefined\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 298 |\u001b[39m         \u001b[36mconst\u001b[39m newMockSimpleLayer \u001b[33m=\u001b[39m (\u001b[33mSimpleLayer\u001b[39m \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmock\u001b[33m.\u001b[39minstances[\u001b[35m1\u001b[39m]\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 299 |\u001b[39m         \u001b[36mconst\u001b[39m newMockImageLayer \u001b[33m=\u001b[39m (\u001b[33mImageLayer\u001b[39m \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmock\u001b[33m.\u001b[39minstances[\u001b[35m1\u001b[39m]\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 300 |\u001b[39m         expect(newMockSimpleLayer\u001b[33m.\u001b[39mstart)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 301 |\u001b[39m         expect(newMockImageLayer\u001b[33m.\u001b[39mstart)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 302 |\u001b[39m         \u001b[36mconst\u001b[39m mockSimulation \u001b[33m=\u001b[39m (game\u001b[33m.\u001b[39mcreate \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmock\u001b[33m.\u001b[39mresults[\u001b[35m0\u001b[39m]\u001b[33m.\u001b[39mvalue\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 303 |\u001b[39m         expect(mockSimulation\u001b[33m.\u001b[39msetSize)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[35m1920\u001b[39m\u001b[33m,\u001b[39m \u001b[35m1080\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/test/simulation.test.ts\u001b[39m\u001b[0m\u001b[2m:300:42)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mSimulation  setColour calls on simple layer, errors on image layer\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    \u001b[1mMatcher error\u001b[22m: \u001b[31mreceived\u001b[39m value must be a mock or spy function\n\n    Received has value: \u001b[31mundefined\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 310 |\u001b[39m         \u001b[36mconst\u001b[39m consoleSpy \u001b[33m=\u001b[39m jest\u001b[33m.\u001b[39mspyOn(console\u001b[33m,\u001b[39m \u001b[32m'error'\u001b[39m)\u001b[33m.\u001b[39mmockImplementation(() \u001b[33m=>\u001b[39m { })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 311 |\u001b[39m         sim\u001b[33m.\u001b[39msetColour(\u001b[32m'#fff'\u001b[39m\u001b[33m,\u001b[39m \u001b[35m0\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 312 |\u001b[39m         expect(mockSimpleLayer\u001b[33m.\u001b[39msetColour)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'#fff'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                           \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 313 |\u001b[39m         sim\u001b[33m.\u001b[39msetColour(\u001b[32m'#fff'\u001b[39m\u001b[33m,\u001b[39m \u001b[35m1\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 314 |\u001b[39m         expect(consoleSpy)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[22m\n\u001b[2m     \u001b[90m 315 |\u001b[39m             \u001b[32m'attempting to set a colour on a layer that does not have a colour property'\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/test/simulation.test.ts\u001b[39m\u001b[0m\u001b[2m:312:43)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mSimulation  setter methods call through to layers\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    \u001b[1mMatcher error\u001b[22m: \u001b[31mreceived\u001b[39m value must be a mock or spy function\n\n    Received has value: \u001b[31mundefined\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 324 |\u001b[39m         \u001b[36mconst\u001b[39m mockImageLayer \u001b[33m=\u001b[39m (\u001b[33mImageLayer\u001b[39m \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmock\u001b[33m.\u001b[39minstances[\u001b[35m0\u001b[39m]\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 325 |\u001b[39m         sim\u001b[33m.\u001b[39msetDensity(\u001b[35m100\u001b[39m\u001b[33m,\u001b[39m \u001b[35m0\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 326 |\u001b[39m         expect(mockSimpleLayer\u001b[33m.\u001b[39msetDensity)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[35m100\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                            \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 327 |\u001b[39m         sim\u001b[33m.\u001b[39msetAmplitude(\u001b[35m2.5\u001b[39m\u001b[33m,\u001b[39m \u001b[35m1\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 328 |\u001b[39m         expect(mockImageLayer\u001b[33m.\u001b[39msetAmplitude)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[35m2.5\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 329 |\u001b[39m         sim\u001b[33m.\u001b[39msetFrequency(\u001b[35m1.5\u001b[39m\u001b[33m,\u001b[39m \u001b[35m0\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/test/simulation.test.ts\u001b[39m\u001b[0m\u001b[2m:326:44)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mSimulation  start without attachTo logs error and does not start simulation\u001b[39m\u001b[22m\n\n    TypeError: Cannot read properties of null (reading 'offsetWidth')\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 52 |\u001b[39m         newLayer \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mSimpleLayer\u001b[39m(\u001b[22m\n\u001b[2m     \u001b[90m 53 |\u001b[39m           layer\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 54 |\u001b[39m           config\u001b[33m.\u001b[39mattachTo\u001b[33m.\u001b[39moffsetWidth\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 55 |\u001b[39m           config\u001b[33m.\u001b[39mattachTo\u001b[33m.\u001b[39moffsetHeight\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 56 |\u001b[39m           strength\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 57 |\u001b[39m           durationIn\u001b[33m,\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2msrc/simulation.ts\u001b[2m:54:27\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m          at Array.forEach (<anonymous>)\u001b[22m\n\u001b[2m      \u001b[2mat makeLayers (\u001b[22m\u001b[2msrc/simulation.ts\u001b[2m:23:19)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat commonStart (\u001b[22m\u001b[2msrc/simulation.ts\u001b[2m:18:5)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.start (\u001b[22m\u001b[2msrc/simulation.ts\u001b[2m:85:5)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/test/simulation.test.ts\u001b[39m\u001b[0m\u001b[2m:389:13)\u001b[22m\u001b[2m\u001b[22m\n",
      "name": "/home/erik/projects-new/snowfall/src/test/simulation.test.ts",
      "startTime": 1762308906061,
      "status": "failed",
      "summary": ""
    }
  ],
  "wasInterrupted": false
}
